!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";e.BaseClass=n(1),e.BasePopupClass=n(2),e.config=window._config,e.util=n(3),e.TipManager=n(4),e.viewAdapt=n(5);var t=n(6),i=n(7),o=n(8),r=n(9),a=n(10);e.View={},e.Popup={};var s=function(){var e=config.winWidth/config.winHeight;$("html").css({"font-size":18*config.ratio/e+"px"})},u=function(){document.body.addEventListener("touchmove",function(e){e._isScroller||e.preventDefault()}),util.overscroll(document.querySelector(".scrollable"))},c=function(){View.loading=new a(".loading"),View.home=new t(".home"),View.tell=new i(".tell"),Popup.first=new o(".first"),Popup.rule=new r(".rule")};!function(e){s(),u(),c(),$(".main").show(),View.loading.show(),View.loading.preload(function(e,t){var n=parseInt(e/t*100);View.loading.$dom.find(".bar").css({width:n+"%"}),View.loading.$dom.find(".text").html(n+"% loading"),e===t&&(View.loading.hide(),Popup.first.show())})}(config.userInfo),$(function(){$("html, body, .main, .panel, .page").css({height:window.innerHeight})})}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.$dom=$(t),this.$dom.hide(),this.init()}return i(e,[{key:"init",value:function(){}},{key:"show",value:function(){this.$dom.show()}},{key:"hide",value:function(){this.$dom.hide()}}]),e}();e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"init",value:function(){}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.$dom.fadeInUp()}},{key:"hide",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this),this.$dom.fadeOutDown(e)}}]),t}(BaseClass);e.exports=s},function(e,t){"use strict";t.versions=function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebkit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i)}}(),t.randomNum=function(e,t){var n=t-e,i=Math.random();return e+Math.round(i*n)},t.getOption=function(e){var t=location.search;if(""==t)return"";t=t.slice(1);for(var n=t.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");if(r[0]==e)return r[1]}return""},t.changeURL=function(e,t){history.pushState&&history.pushState({},0,wechat.filter(e)),window.location.hash=t},t.setPhoto=function(e,t,n){var i=parseInt(e.width()/e.height()*100);if(!/^(?:image\/jpeg|image\/png|image\/jpg)$/i.test(n.type))return void TipManager.show("请上传jpg/png/jpeg格式!");var o=new FileReader;o.readAsDataURL(n),o.onload=function(e){t.attr({src:e.target.result})},t[0].onload=function(){t.css({width:"auto",height:"auto"}),parseInt(t.width()/t.height()*100)<i?t.css({width:"auto",height:"90%"}):t.css({width:"90%",height:"auto"})}},"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),t.overscroll=function(e){e.addEventListener("touchstart",function(){var t=e.scrollTop,n=e.scrollHeight,i=t+e.offsetHeight;0===t?e.scrollTop=1:i===n&&(e.scrollTop=t-1)}),e.addEventListener("touchmove",function(t){e.offsetHeight<e.scrollHeight&&(t._isScroller=!0)})},$.fn.extend({animateCss:function(e,t){var n=this,i="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return this.off(i).addClass("animated "+e).one(i,function(){n.removeClass("animated "+e),t&&t()}),this},fadeIn:function(){this.show(),this.animateCss("fadeIn")},fadeOut:function(){var e=this;this.animateCss("fadeOut",function(){e.hide()})},fadeInUp:function(){this.show(),this.find(".mask").animateCss("fadeIn").next().animateCss("fadeInUpBig")},fadeOutDown:function(e){var t=this;this.find(".mask").animateCss("fadeOut").next().animateCss("fadeOutDownBig",function(){t.hide(),e&&e()})},showInfo:function(){this.show().animateCss("fadeInDown")},hideInfo:function(){var e=this;this.animateCss("fadeOutUp",function(){e.html(""),e.hide()})}})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=void 0,r=$(".tip.uploading"),a=$(".tip.uploaded"),s=function(){function e(){n(this,e)}return i(e,null,[{key:"getInstance",value:function(){return o||(o=new e),o}},{key:"show",value:function(e,t){t=t||2500;var n=$('<div class="info">'+e+"</div>");$(".main").append(n),n.showInfo(),setTimeout(function(){n.hideInfo()},t)}},{key:"loading",value:function(e,t){r.find(".progress-bar").css({width:e+"%"}),r.find(".text").html(t)}},{key:"loadingShow",value:function(){r.fadeIn(),r.find(".progress-bar").css({width:"0%"})}},{key:"loadingHide",value:function(){r.hide()}},{key:"uploadedShow",value:function(){a.fadeIn()}},{key:"uploadedHide",value:function(){a.fadeOut()}}]),e}();e.exports=s},function(e,t){"use strict";function n(){var e=window.innerWidth,t=window.innerHeight,n=e/t;i.forEach(function(i){if(n>i[1]){var o=i[1]*t,r=(e-o)/2;$(i[0]).width(o),$(i[0]).css({marginLeft:r})}})}var i=[];t.push=function(e,t){i.push([e,t]),n()},window.onresize=function(){config.debug&&util.getOption("debug")}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"init",value:function(){this.$rewardList=$("#rewardList"),this.$flowNum=$("#flowNum"),this.$homeBtn=$("#homeBtn"),this.personNum=config.rewardPeople.length,this.personIndex=0,this.initRewardList(),this.initHomeBtn()}},{key:"initHomeBtn",value:function(){this.$homeBtn.click(function(){View.tell.show()})}},{key:"randomFixMoney",value:function(){return parseInt(200*Math.random()+300,10)}},{key:"playFlowNum",value:function(){this.$flowNum.countup(this.randomFixMoney())}},{key:"createItemImg",value:function(e){var t=new Date,n=e.time>t.getMinutes()?t.getHours()-1:t.getHours(),i=e.time>9?e.time:"0"+e.time;return'<img src="'+e.src+'"><div class="hbName"><h3>'+e.name+'</h3><p class="hbTime">'+n+":"+i+'</p></div><span class="hbMoney">'+e.text+"</span>"}},{key:"initRewardList",value:function(){var e=this;setInterval(function(){e.personIndex=e.personIndex+1>=e.personNum?0:e.personIndex+1;var t=config.rewardPeople[e.personIndex];$("#rewardList li").length>6&&$("#rewardList li:last").slideUp(600,function(){$(this).remove()}),$("#rewardList li:first .hbMoney").css("color","#949494"),e.$rewardList.prepend($("<li>").append(e.createItemImg(t)).hide()),$("#rewardList li:first").find(".hbMoney").css("color","#FF0000"),$("#rewardList li:first").slideDown(600,function(){e.personIndex%2==0?$("#rewardList li:first").find(".hbMoney").addClass("animated tada"):$("#rewardList li:first").find(".hbMoney").addClass("animated zoomIn")})},2e3)}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.playFlowNum()}},{key:"hide",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}(BaseClass);e.exports=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"init",value:function(){}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),Popup.rule.show()}},{key:"hide",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}(BaseClass);e.exports=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return viewAdapt.push(".first .box",config.ratio),o}return o(t,e),r(t,[{key:"init",value:function(){this.$chai=$("#chai"),this.$kai_text=$("#kai_text"),this.initChaiEvent()}},{key:"initChaiEvent",value:function(){var e=this;this.$chai.click(function(){e.$kai_text.addClass("first__rotate"),setTimeout(function(){e.hide(),View.home.show()},2e3)})}},{key:"show",value:function(){this.$dom.show()}},{key:"hide",value:function(){this.$dom.hide()}}]),t}(BasePopupClass);e.exports=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"init",value:function(){this.shareFriendOption=1,this.shareTimelineOption=2,this.shareAgainOption=3,this.$ruleMask=this.$dom.find(".mask"),this.$ruleDialog=$("#ruleDialog"),this.$ruleText=$("#ruleText"),this.$ruleBtn=$("#ruleBtn"),this.initShareEvents(this.shareFriendOption),this.initRuleBtnEvents(),this.selectionArr=[1,1,2,3],this.selectionIndex=0}},{key:"initRuleBtnEvents",value:function(){var e=this;this.$ruleBtn.click(function(){e.$ruleMask.hide(),e.$ruleDialog.hide(),config.shareAgainTime||(window.location.href=config.shareFinishUrl)})}},{key:"initShareEvents",value:function(e){e===this.shareFriendOption?this.shareFriendWay():e===this.shareTimelineOption?this.shareTimelineWay():this.shareAgainWay()}},{key:"shareFriendWay",value:function(){wx.ready(function(){wx.showMenuItems({menuList:["menuItem:share:appMessage"]}),wx.hideMenuItems({menuList:["menuItem:share:timeline"]})}),wx.onMenuShareAppMessage({title:config.shareAppInfo.appmessageTitle,desc:config.shareAppInfo.appmessageDesc,link:config.shareAppInfo.link,imgUrl:config.shareAppInfo.imgUrl,success:this.shareFriendSuccess.bind(this)}),this.displayDialog()}},{key:"shareFriendSuccess",value:function(){config.shareAppTime=config.shareAppTime-1,config.shareAppTime>0?(this.$ruleText.html('分享成功，还需分享<span style="font-size:2rem;color:red;">'+config.shareAppTime+"</span>个不同的微信群即可领取"),this.initShareEvents(this.shareFriendOption)):(this.$ruleText.html('分享成功，最后一步啦！请分享到<span style="font-size:1.5rem;color:red">朋友圈</span>即可领取!'),this.initShareEvents(this.shareTimelineOption))}},{key:"shareTimelineWay",value:function(){wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:appMessage"]}),wx.showMenuItems({menuList:["menuItem:share:timeline"]})}),wx.onMenuShareTimeline({title:config.shareTimelineInfo.timelineTitle,link:config.shareTimelineInfo.link,imgUrl:config.shareTimelineInfo.imgUrl,success:this.shareTimelineSuccess.bind(this)}),this.displayDialog()}},{key:"shareTimelineSuccess",value:function(){config.shareTimelineTime=config.shareTimelineTime-1,config.shareTimelineTime>0?this.initShareEvents(this.shareTimelineOption):(this.$ruleText.html('分享失败,请重新分享到<br/><span style="font-size: 30px;color: #19b417">朋友圈</span>即可领取!'),this.initShareEvents(this.shareAgainOption))}},{key:"shareAgainWay",value:function(){wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:appMessage"]}),wx.showMenuItems({menuList:["menuItem:share:timeline"]})}),wx.onMenuShareTimeline({title:config.shareAgainInfo.timelineTitle,link:config.shareAgainInfo.link,imgUrl:config.shareAgainInfo.imgUrl,success:this.shareAgainSuccess.bind(this)}),this.displayDialog()}},{key:"shareAgainSuccess",value:function(){config.shareAgainTime=config.shareAgainTime-1,this.$ruleText.html("恭喜您已获得流量，请不要删除朋友圈链接，客服会在24小时内审核并发放流量!"),this.displayDialog()}},{key:"displayDialog",value:function(){this.$ruleMask.show(),this.$ruleDialog.show()}},{key:"show",value:function(){this.initShareEvents(this.shareFriendOption),this.$dom.show()}},{key:"hide",value:function(){this.$dom.hide()}}]),t}(BasePopupClass);e.exports=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"preload",value:function(e){var t=$("img"),n=0,i=t.length;t.each(function(t){this.complete?(n++,e(n,i)):this.onload=function(){n++,e(n,i),this.onload=null}}),i||e(n,i)}},{key:"hide",value:function(){this.$dom.hide()}}]),t}(BaseClass);e.exports=a}]);
